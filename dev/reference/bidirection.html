<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Utilities for working with bidirectional layers — bidirection • ggplot2</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>

<!-- Bootstrap -->
<link href="../tidyverse.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>
<link href="../tidyverse-2.css" rel="stylesheet">

<!--optional theme-->
<link href="../.css" rel="stylesheet">



<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>


<meta property="og:title" content="Utilities for working with bidirectional layers — bidirection" />
<meta property="og:description" content="These functions are what underpins the ability of certain geoms to work
automatically in both directions. See the Extending ggplot2 vignette for
how they are used when implementing Geom, Stat, and Position classes." />
<meta property="og:image" content="https://ggplot2.tidyverse.org/logo.png" />
<meta name="twitter:card" content="summary" />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>

  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">ggplot2</a>
        <div class="info hidden-xs hidden-sm">
          <span class="partof">part of the <a href="https://tidyverse.org">tidyverse</a></span>
          <span class="version version-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">3.3.3.9000</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Releases</li>
    <li>
      <a href="https://www.tidyverse.org/blog/2020/03/ggplot2-3-3-0/">Version 3.3.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2019/06/ggplot2-3-2-0/">Version 3.2.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2018/10/ggplot2-3-1-0/">Version 3.1.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2018/07/ggplot2-3-0-0/">Version 3.0.0</a>
    </li>
    <li>
      <a href="https://blog.rstudio.com/2016/11/14/ggplot2-2-2-0/">Version 2.2.0</a>
    </li>
    <li>
      <a href="https://blog.rstudio.com/2016/03/03/ggplot2-2-1-0/">Version 2.1.0</a>
    </li>
    <li>
      <a href="https://blog.rstudio.com/2015/12/21/ggplot2-2-0-0/">Version 2.0.0</a>
    </li>
    <li>
      <a href="https://blog.rstudio.com/2015/01/09/ggplot2-updates/">Version 1.0.0</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="../news/index.html">Changelog</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/ggplot2-specs.html">Aesthetic specifications</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Developer</li>
    <li>
      <a href="../articles/extending-ggplot2.html">Extending ggplot2</a>
    </li>
    <li>
      <a href="../articles/ggplot2-in-packages.html">Using ggplot2 in packages</a>
    </li>
    <li>
      <a href="../articles/profiling.html">Profiling Performance</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">FAQ</li>
    <li>
      <a href="../articles/articles/faq-axes.html">FAQ: Axes</a>
    </li>
    <li>
      <a href="../articles/articles/faq-faceting.html">FAQ: Faceting</a>
    </li>
    <li>
      <a href="../articles/articles/faq-customising.html">FAQ: Customising</a>
    </li>
    <li>
      <a href="../articles/articles/faq-annotation.html">FAQ: Annotation</a>
    </li>
    <li>
      <a href="../articles/articles/faq-reordering.html">FAQ: Reordering</a>
    </li>
    <li>
      <a href="../articles/articles/faq-bars.html">FAQ: Barplots</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://exts.ggplot2.tidyverse.org/gallery/">Extensions</a>
</li>
<li>
  <a href="https://github.com/tidyverse/ggplot2/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Utilities for working with bidirectional layers</h1>
    <small class="dont-index">Source: <a href='https://github.com/tidyverse/ggplot2/blob/master/R/utilities.r'><code>R/utilities.r</code></a></small>
    <div class="hidden name"><code>bidirection.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>These functions are what underpins the ability of certain geoms to work
automatically in both directions. See the <em>Extending ggplot2</em> vignette for
how they are used when implementing <code>Geom</code>, <code>Stat</code>, and <code>Position</code> classes.</p>
    </div>

    <pre class="usage"><span class='fu'>has_flipped_aes</span><span class='op'>(</span>
  <span class='va'>data</span>,
  params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>,
  main_is_orthogonal <span class='op'>=</span> <span class='cn'>NA</span>,
  range_is_orthogonal <span class='op'>=</span> <span class='cn'>NA</span>,
  group_has_equal <span class='op'>=</span> <span class='cn'>FALSE</span>,
  ambiguous <span class='op'>=</span> <span class='cn'>FALSE</span>,
  main_is_continuous <span class='op'>=</span> <span class='cn'>FALSE</span>,
  main_is_optional <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span>

<span class='fu'>flip_data</span><span class='op'>(</span><span class='va'>data</span>, flip <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span>

<span class='fu'>flipped_names</span><span class='op'>(</span>flip <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>The layer data</p></td>
    </tr>
    <tr>
      <th>params</th>
      <td><p>The parameters of the <code>Stat</code>/<code>Geom</code>. Only the <code>orientation</code>
parameter will be used.</p></td>
    </tr>
    <tr>
      <th>main_is_orthogonal</th>
      <td><p>If only <code>x</code> or <code>y</code> are present do they correspond
to the main orientation or the reverse. E.g. If <code>TRUE</code> and <code>y</code> is present
it is not flipped. If <code>NA</code> this check will be ignored.</p></td>
    </tr>
    <tr>
      <th>range_is_orthogonal</th>
      <td><p>If <code>xmin</code>/<code>xmax</code> or <code>ymin</code>/<code>ymax</code> is present do
they correspond to the main orientation or reverse. If <code>NA</code> this check will
be ignored.</p></td>
    </tr>
    <tr>
      <th>group_has_equal</th>
      <td><p>Is it expected that grouped data has either a single
<code>x</code> or <code>y</code> value that will correspond to the orientation.</p></td>
    </tr>
    <tr>
      <th>ambiguous</th>
      <td><p>Is the layer ambiguous in its mapping by nature. If so, it
will only be flipped if <code>params$orientation == "y"</code></p></td>
    </tr>
    <tr>
      <th>main_is_continuous</th>
      <td><p>If there is a discrete and continuous axis, does
the continuous one correspond to the main orientation?</p></td>
    </tr>
    <tr>
      <th>main_is_optional</th>
      <td><p>Is the main axis aesthetic optional and, if not
given, set to <code>0</code></p></td>
    </tr>
    <tr>
      <th>flip</th>
      <td><p>Logical. Is the layer flipped.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>has_flipped_aes()</code> returns <code>TRUE</code> if it detects a layer in the other
orientation and <code>FALSE</code> otherwise. <code>flip_data()</code> will return the input
unchanged if <code>flip = FALSE</code> and the data with flipped aesthetic names if
<code>flip = TRUE</code>. <code>flipped_names()</code> returns a named list of strings. If
<code>flip = FALSE</code> the name of the element will correspond to the element, e.g.
<code>flipped_names(FALSE)$x == "x"</code> and if <code>flip = TRUE</code> it will correspond to
the flipped name, e.g. <code>flipped_names(FALSE)$x == "y"</code></p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>has_flipped_aes()</code> is used to sniff out the orientation of the layer from
the data. It has a range of arguments that can be used to finetune the
sniffing based on what the data should look like. <code>flip_data()</code> will switch
the column names of the data so that it looks like x-oriented data.
<code>flipped_names()</code> provides a named list of aesthetic names that corresponds
to the orientation of the layer.</p>
    <h2 class="hasAnchor" id="controlling-the-sniffing"><a class="anchor" href="#controlling-the-sniffing"></a>Controlling the sniffing</h2>

    

<p>How the layer data should be interpreted depends on its specific features.
<code>has_flipped_aes()</code> contains a range of flags for defining what certain
features in the data correspond to:</p><ul>
<li><p><code>main_is_orthogonal</code>: This argument controls how the existence of only a <code>x</code>
or <code>y</code> aesthetic is understood. If <code>TRUE</code> then the exisiting aesthetic
would be then secondary axis. This behaviour is present in <code><a href='geom_violin.html'>stat_ydensity()</a></code>
and <code><a href='geom_boxplot.html'>stat_boxplot()</a></code>. If <code>FALSE</code> then the exisiting aesthetic is the main
axis as seen in e.g. <code><a href='geom_freqpoly.html'>stat_bin()</a></code>, <code><a href='geom_count.html'>geom_count()</a></code>, and <code><a href='geom_density.html'>stat_density()</a></code>.</p></li>
<li><p><code>range_is_orthogonal</code>: This argument controls whether the existance of
range-like aesthetics (e.g. <code>xmin</code> and <code>xmax</code>) represents the main or
secondary axis. If <code>TRUE</code> then the range is given for the secondary axis as
seen in e.g. <code><a href='geom_ribbon.html'>geom_ribbon()</a></code> and <code><a href='geom_crossbar.html'>geom_linerange()</a></code>.</p></li>
<li><p><code>group_has_equal</code>: This argument controls whether to test for equality of
all <code>x</code> and <code>y</code> values inside each group and set the main axis to the one
where all is equal. This test is only performed if <code>TRUE</code>, and only after
less computationally heavy tests has come up empty handed. Examples are
<code><a href='geom_boxplot.html'>stat_boxplot()</a></code> and <a href='geom_violin.html'>stat_ydensity</a></p></li>
<li><p><code>ambiguous</code>: This argument tells the function that the layer, while
bidirectional, doesn't treat each axis differently. It will circumvent any
data based guessing and only take hint from the <code>orientation</code> element in
<code>params</code>. If this is not present it will fall back to <code>FALSE</code>. Examples are
<code><a href='geom_path.html'>geom_line()</a></code> and <code><a href='geom_ribbon.html'>geom_area()</a></code></p></li>
<li><p><code>main_is_continuous</code>: This argument controls how the test for discreteness
in the scales should be interpreted. If <code>TRUE</code> then the main axis will be
the one which is not discrete-like. Conversely, if <code>FALSE</code> the main axis
will be the discrete-like one. Examples of <code>TRUE</code> is <code><a href='geom_density.html'>stat_density()</a></code> and
<code><a href='geom_freqpoly.html'>stat_bin()</a></code>, while examples of <code>FALSE</code> is <code><a href='geom_violin.html'>stat_ydensity()</a></code> and
<code><a href='geom_boxplot.html'>stat_boxplot()</a></code></p></li>
<li><p><code>main_is_optional</code>: This argument controls the rare case of layers were the
main direction is an optional aesthetic. This is only seen in
<code><a href='geom_boxplot.html'>stat_boxplot()</a></code> where <code>x</code> is set to <code>0</code> if not given. If <code>TRUE</code> there will
be a check for whether all <code>x</code> or all <code>y</code> are equal to <code>0</code></p></li>
</ul>


  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="tidyverse">
  <p>ggplot2 is a part of the <strong>tidyverse</strong>, an ecosystem of packages designed with common APIs and a shared philosophy. Learn more at <a href="https://tidyverse.org">tidyverse.org</a>.</p>
</div>

<div class="author">
  <p>
    Developed by <a href='http://hadley.nz'>Hadley Wickham</a>, <a href='https://github.com/wch'>Winston Chang</a>, <a href='https://github.com/lionel-'>Lionel Henry</a>, <a href='https://data-imaginist.com'>Thomas Lin Pedersen</a>, Kohske Takahashi, <a href='https://clauswilke.com'>Claus Wilke</a>, <a href='https://karawoo.com'>Kara Woo</a>, <a href='https://yutani.rbind.io'>Hiroaki Yutani</a>, <a href='https://fishandwhistle.net'>Dewey Dunnington</a>, <a href='https://www.rstudio.com'><img src='https://www.tidyverse.org/rstudio-logo.svg' alt='RStudio' height='24' /></a>.
    Site built by <a href="https://pkgdown.r-lib.org">pkgdown</a>.
  </p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: 'e1261f3df95d2d4704c626ff11a4b536',
    indexName: 'tidyverse_ggplot2',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


