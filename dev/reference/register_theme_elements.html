<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Define and register new theme elements — register_theme_elements • ggplot2</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>

<!-- Bootstrap -->
<link href="../tidyverse.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>
<link href="../tidyverse-2.css" rel="stylesheet">

<!--optional theme-->
<link href="../.css" rel="stylesheet">



<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>


<meta property="og:title" content="Define and register new theme elements — register_theme_elements" />
<meta property="og:description" content="The underlying structure of a ggplot2 theme is defined via the element tree, which
specifies for each theme element what type it should have and whether it inherits from
a parent element. In some use cases, it may be necessary to modify or extend this
element tree and provide default settings for newly defined theme elements." />
<meta property="og:image" content="https://ggplot2.tidyverse.org/logo.png" />
<meta name="twitter:card" content="summary" />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>

  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">ggplot2</a>
        <div class="info hidden-xs hidden-sm">
          <span class="partof">part of the <a href="https://tidyverse.org">tidyverse</a></span>
          <span class="version version-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">3.3.3.9000</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Releases</li>
    <li>
      <a href="https://www.tidyverse.org/blog/2020/03/ggplot2-3-3-0/">Version 3.3.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2019/06/ggplot2-3-2-0/">Version 3.2.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2018/10/ggplot2-3-1-0/">Version 3.1.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2018/07/ggplot2-3-0-0/">Version 3.0.0</a>
    </li>
    <li>
      <a href="https://blog.rstudio.com/2016/11/14/ggplot2-2-2-0/">Version 2.2.0</a>
    </li>
    <li>
      <a href="https://blog.rstudio.com/2016/03/03/ggplot2-2-1-0/">Version 2.1.0</a>
    </li>
    <li>
      <a href="https://blog.rstudio.com/2015/12/21/ggplot2-2-0-0/">Version 2.0.0</a>
    </li>
    <li>
      <a href="https://blog.rstudio.com/2015/01/09/ggplot2-updates/">Version 1.0.0</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="../news/index.html">Changelog</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/ggplot2-specs.html">Aesthetic specifications</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Developer</li>
    <li>
      <a href="../articles/extending-ggplot2.html">Extending ggplot2</a>
    </li>
    <li>
      <a href="../articles/ggplot2-in-packages.html">Using ggplot2 in packages</a>
    </li>
    <li>
      <a href="../articles/profiling.html">Profiling Performance</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">FAQ</li>
    <li>
      <a href="../articles/articles/faq-axes.html">FAQ: Axes</a>
    </li>
    <li>
      <a href="../articles/articles/faq-faceting.html">FAQ: Faceting</a>
    </li>
    <li>
      <a href="../articles/articles/faq-customising.html">FAQ: Customising</a>
    </li>
    <li>
      <a href="../articles/articles/faq-annotation.html">FAQ: Annotation</a>
    </li>
    <li>
      <a href="../articles/articles/faq-reordering.html">FAQ: Reordering</a>
    </li>
    <li>
      <a href="../articles/articles/faq-bars.html">FAQ: Barplots</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://exts.ggplot2.tidyverse.org/gallery/">Extensions</a>
</li>
<li>
  <a href="https://github.com/tidyverse/ggplot2/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Define and register new theme elements</h1>
    <small class="dont-index">Source: <a href='https://github.com/tidyverse/ggplot2/blob/master/R/theme-elements.r'><code>R/theme-elements.r</code></a></small>
    <div class="hidden name"><code>register_theme_elements.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The underlying structure of a ggplot2 theme is defined via the element tree, which
specifies for each theme element what type it should have and whether it inherits from
a parent element. In some use cases, it may be necessary to modify or extend this
element tree and provide default settings for newly defined theme elements.</p>
    </div>

    <pre class="usage"><span class='fu'>register_theme_elements</span><span class='op'>(</span><span class='va'>...</span>, element_tree <span class='op'>=</span> <span class='cn'>NULL</span>, complete <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='fu'>reset_theme_settings</span><span class='op'>(</span>reset_current <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='fu'>get_element_tree</span><span class='op'>(</span><span class='op'>)</span>

<span class='fu'>el_def</span><span class='op'>(</span>class <span class='op'>=</span> <span class='cn'>NULL</span>, inherit <span class='op'>=</span> <span class='cn'>NULL</span>, description <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>...</th>
      <td><p>Element specifications</p></td>
    </tr>
    <tr>
      <th>element_tree</th>
      <td><p>Addition of or modification to the element tree, which specifies the
inheritance relationship of the theme elements. The element tree must be provided as
a list of named element definitions created with el_def().</p></td>
    </tr>
    <tr>
      <th>complete</th>
      <td><p>If <code>TRUE</code> (the default), elements are set to inherit from blank elements.</p></td>
    </tr>
    <tr>
      <th>reset_current</th>
      <td><p>If <code>TRUE</code> (the default), the currently active theme is
reset to the default theme.</p></td>
    </tr>
    <tr>
      <th>class</th>
      <td><p>The name of the element class. Examples are "element_line" or
"element_text" or "unit", or one of the two reserved keywords "character" or
"margin". The reserved keyword "character" implies a character
or numeric vector, not a class called "character". The keyword
"margin" implies a unit vector of length 4, as created by <code><a href='margin.html'>margin()</a></code>.</p></td>
    </tr>
    <tr>
      <th>inherit</th>
      <td><p>A vector of strings, naming the elements that this
element inherits from.</p></td>
    </tr>
    <tr>
      <th>description</th>
      <td><p>An optional character vector providing a description
for the element.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The function <code>register_theme_elements()</code> provides the option to globally register new
theme elements with ggplot2. In general, for each new theme element both an element
definition and a corresponding entry in the element tree should be provided. See
examples for details. This function is meant primarily for developers of extension
packages, who are strongly urged to adhere to the following best practices:</p><ol>
<li><p>Call <code>register_theme_elements()</code> from the <code><a href='https://rdrr.io/r/base/ns-hooks.html'>.onLoad()</a></code> function of your package, so
that the new theme elements are available to anybody using functions from your package,
irrespective of whether the package has been attached (with <code><a href='https://rdrr.io/r/base/library.html'>library()</a></code> or <code><a href='https://rdrr.io/r/base/library.html'>require()</a></code>)
or not.</p></li>
<li><p>For any new elements you create, prepend them with the name of your package, to avoid
name clashes with other extension packages. For example, if you are working on a package
<strong>ggxyz</strong>, and you want it to provide a new element for plot panel annotations (as demonstrated
in the Examples below), name the new element <code>ggxyz.panel.annotation</code>.</p></li>
</ol>

<p>The function <code>reset_theme_settings()</code> restores the default element tree, discards
all new element definitions, and (unless turned off) resets the currently active
theme to the default.</p>
<p>The function <code>get_element_tree()</code> returns the currently active element tree.</p>
<p>The function <code>el_def()</code> is used to define new or modified element types and
element inheritance relationships for the element tree.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Let's assume a package `ggxyz` wants to provide an easy way to add annotations to</span>
<span class='co'># plot panels. To do so, it registers a new theme element `ggxyz.panel.annotation`</span>
<span class='fu'>register_theme_elements</span><span class='op'>(</span>
  ggxyz.panel.annotation <span class='op'>=</span> <span class='fu'><a href='margin.html'>element_text</a></span><span class='op'>(</span>color <span class='op'>=</span> <span class='st'>"blue"</span>, hjust <span class='op'>=</span> <span class='fl'>0.95</span>, vjust <span class='op'>=</span> <span class='fl'>0.05</span><span class='op'>)</span>,
  element_tree <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>ggxyz.panel.annotation <span class='op'>=</span> <span class='fu'>el_def</span><span class='op'>(</span><span class='st'>"element_text"</span>, <span class='st'>"text"</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>)</span>

<span class='co'># Now the package can define a new coord that includes a panel annotation</span>
<span class='va'>coord_annotate</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>label</span> <span class='op'>=</span> <span class='st'>"panel annotation"</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='fu'><a href='ggproto.html'>ggproto</a></span><span class='op'>(</span><span class='cn'>NULL</span>, <span class='va'>CoordCartesian</span>,
    limits <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='cn'>NULL</span>, y <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span>,
    expand <span class='op'>=</span> <span class='cn'>TRUE</span>,
    default <span class='op'>=</span> <span class='cn'>FALSE</span>,
    clip <span class='op'>=</span> <span class='st'>"on"</span>,
    render_fg <span class='op'>=</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>panel_params</span>, <span class='va'>theme</span><span class='op'>)</span> <span class='op'>{</span>
      <span class='fu'><a href='element_render.html'>element_render</a></span><span class='op'>(</span><span class='va'>theme</span>, <span class='st'>"ggxyz.panel.annotation"</span>, label <span class='op'>=</span> <span class='va'>label</span><span class='op'>)</span>
    <span class='op'>}</span>
  <span class='op'>)</span>
<span class='op'>}</span>

<span class='co'># Example plot with this new coord</span>
<span class='va'>df</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span>, y <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span><span class='op'>)</span>
<span class='fu'><a href='ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='va'>df</span>, <span class='fu'><a href='aes.html'>aes</a></span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>y</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='geom_point.html'>geom_point</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>coord_annotate</span><span class='op'>(</span><span class='st'>"annotation in blue"</span><span class='op'>)</span>
</div><div class='img'><img src='register_theme_elements-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># Revert to the original ggplot2 settings</span>
<span class='fu'>reset_theme_settings</span><span class='op'>(</span><span class='op'>)</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="tidyverse">
  <p>ggplot2 is a part of the <strong>tidyverse</strong>, an ecosystem of packages designed with common APIs and a shared philosophy. Learn more at <a href="https://tidyverse.org">tidyverse.org</a>.</p>
</div>

<div class="author">
  <p>
    Developed by <a href='http://hadley.nz'>Hadley Wickham</a>, <a href='https://github.com/wch'>Winston Chang</a>, <a href='https://github.com/lionel-'>Lionel Henry</a>, <a href='https://data-imaginist.com'>Thomas Lin Pedersen</a>, Kohske Takahashi, <a href='https://clauswilke.com'>Claus Wilke</a>, <a href='https://karawoo.com'>Kara Woo</a>, <a href='https://yutani.rbind.io'>Hiroaki Yutani</a>, <a href='https://fishandwhistle.net'>Dewey Dunnington</a>, <a href='https://www.rstudio.com'><img src='https://www.tidyverse.org/rstudio-logo.svg' alt='RStudio' height='24' /></a>.
    Site built by <a href="https://pkgdown.r-lib.org">pkgdown</a>.
  </p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: 'e1261f3df95d2d4704c626ff11a4b536',
    indexName: 'tidyverse_ggplot2',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


